<!DOCTYPE html>
<html lang="en">
  {% extends 'magasin/base.html' %} {% block content %} {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nouvel Achat</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
  </head>
  <body>
    <div class="col-md-10 col-12 mx-auto mt-4">
      <a href="{% url 'achat' %}" class="btn btn-outline-primary my-3 mx-4"
        >Retourner</a
      >

      <div class="row">
        <div class="col-11 col-md-4 mx-auto mt-5">
          <h1>Nouvel Achat</h1>

          <form method="POST" enctype="multipart/form-data">
            <div class="card-body">
              {% csrf_token %} <label>Payer Entierement : </label>
              {{ form.PayeEntierement }}
              <br /><label>Date d'achat : </label>
              {{ form.dateAchat }}

              <div id="existingFournisseur" style="display: block" class="mb-3">
                <label for="{{ achat_form.fournisseur.id_for_label }}"
                  >Choisir un fournisseur existant :</label
                >
                {{ form.fournisseur }}
              </div>

              <div id="newFournisseurForm">
                <button
                  id="btnNewFour"
                  type="button"
                  class="btn btn-secondary my-3"
                  onclick="toggleFournisseurForm()"
                >
                  Nouveau Fournisseur
                </button>
                <div id="formFournisseur" style="display: none">
                  {{ fournisseur_form }}
                </div>
              </div>

              {{ formset }}
            </div>
            <div class="mt-3">
              <button type="submit" class="btn btn-primary">
                Ajouter Achat
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      function toggleFournisseurForm() {
        const existingFournisseur = document.getElementById(
          "existingFournisseur"
        );
        const btnNewFour = document.getElementById("btnNewFour");
        const newFournisseurForm =
          document.getElementById("newFournisseurForm");

        const formFournisseur = document.getElementById("formFournisseur");
        if (existingFournisseur.style.display == "block") {
          existingFournisseur.style.display = "none";
          newFournisseurForm.style.display = "block";
          formFournisseur.style.display = "block";
          btnNewFour.innerText = "Fournisseur Existant";
        } else {
          existingFournisseur.style.display = "block";
          formFournisseur.style.display = "none";
          btnNewFour.innerText = "Nouveau Fournisseur";
        }
      }
    </script>
  </body>
</html>

{% endblock content %}
